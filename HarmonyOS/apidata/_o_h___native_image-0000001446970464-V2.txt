您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。汇总文件类型定义函数类型定义说明OH_NativeImageOHNativeWindow函数说明OH_NativeImage_AcquireNativeWindow()OH_NativeImage_AttachContext()OH_NativeImage_Create()OH_NativeImage_Destroy()OH_NativeImage_DetachContext()OH_NativeImage_GetTimestamp()OH_NativeImage_GetTransformMatrix()OH_NativeImage_UpdateSurfaceImage()OH_NativeImage 更新时间: 2024-02-07 14:08 毫无帮助帮助不大一般很好非常好
分享
 提供NativeImage功能，作为数据消费者，主要用来将数据和OpenGL纹理对接，需在OpenGL环境下使用。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 起始版本： 9 汇总 文件  文件名称  描述  native_image.h  定义获取和使用NativeImage的相关函数。 引用文件：<native_image/native_image.h> 库：libnative_image.so      类型定义  名称  描述  OH_NativeImage  提供OH_NativeImage结构体声明   OHNativeWindow  提供对NativeWindow的访问功能      函数  函数名称  描述  OH_NativeImage_Create (uint32_t textureId, uint32_t textureTarget)  创建一个OH_NativeImage实例，该实例与OpenGL ES的纹理ID和纹理目标相关联。   OH_NativeImage_AcquireNativeWindow (OH_NativeImage *image)  获取与OH_NativeImage相关联的OHNativeWindow指针. 该OHNativeWindow后续不再需要时需要调用 OH_NativeWindow_DestroyNativeWindow释放。   OH_NativeImage_AttachContext (OH_NativeImage *image, uint32_t textureId)  将OH_NativeImage实例附加到当前OpenGL ES上下文, 且该OpenGL ES纹理会绑定到 GL_TEXTURE_EXTERNAL_OES, 并通过OH_NativeImage进行更新。   OH_NativeImage_DetachContext (OH_NativeImage *image)  将OH_NativeImage实例从当前OpenGL ES上下文分离。   OH_NativeImage_UpdateSurfaceImage (OH_NativeImage *image)  通过OH_NativeImage获取最新帧更新相关联的OpenGL ES纹理。   OH_NativeImage_GetTimestamp (OH_NativeImage *image)  获取最近调用OH_NativeImage_UpdateSurfaceImage的纹理图像的相关时间戳。   OH_NativeImage_GetTransformMatrix (OH_NativeImage *image, float matrix[16])  获取最近调用OH_NativeImage_UpdateSurfaceImage的纹理图像的变化矩阵。   OH_NativeImage_Destroy (OH_NativeImage **image)  销毁通过OH_NativeImage_Create创建的OH_NativeImage实例, 销毁后该 OH_NativeImage指针会被赋值为空。      类型定义说明 OH_NativeImage已复制typedef struct OH_NativeImage OH_NativeImage 描述: 提供OH_NativeImage结构体声明  OHNativeWindow已复制typedef struct NativeWindow OHNativeWindow 描述: 提供对NativeWindow的访问功能  函数说明 OH_NativeImage_AcquireNativeWindow()已复制OHNativeWindow* OH_NativeImage_AcquireNativeWindow (OH_NativeImage * image) 描述： 获取与OH_NativeImage相关联的OHNativeWindow指针。该OHNativeWindow后续不再需要时需要调用 OH_NativeWindow_DestroyNativeWindow释放。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。     返回： 成功则返回一个指向OHNativeWindow实例的指针，否则返回NULL。 起始版本： 9  OH_NativeImage_AttachContext()已复制int32_t OH_NativeImage_AttachContext (OH_NativeImage * image, uint32_t textureId ) 描述： 将OH_NativeImage实例附加到当前OpenGL ES上下文，且该OpenGL ES纹理会绑定到 GL_TEXTURE_EXTERNAL_OES，并通过OH_NativeImage进行更新。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。   textureId  OH_NativeImage要附加到的OpenGL ES纹理的id。     返回： 返回一个由SurfaceError定义的int32_t类型的错误码。 起始版本： 9  OH_NativeImage_Create()已复制OH_NativeImage* OH_NativeImage_Create (uint32_t textureId, uint32_t textureTarget ) 描述： 创建一个OH_NativeImage实例，该实例与OpenGL ES的纹理ID和纹理目标相关联。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  textureId  OpenGL ES的纹理ID，OH_NativeImage实例会与之相关联。   textureTarget  OpenGL ES的纹理目标。     返回： 返回一个指向OH_NativeImage实例的指针，否则返回NULL。 起始版本： 9  OH_NativeImage_Destroy()已复制void OH_NativeImage_Destroy (OH_NativeImage ** image) 描述： 销毁通过OH_NativeImage_Create创建的OH_NativeImage实例, 销毁后该 OH_NativeImage指针会被赋值为空. @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。      OH_NativeImage_DetachContext()已复制int32_t OH_NativeImage_DetachContext (OH_NativeImage * image) 描述： 将OH_NativeImage实例从当前OpenGL ES上下文分离。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。     返回： 返回一个由SurfaceError定义的int32_t类型的错误码。 起始版本： 9  OH_NativeImage_GetTimestamp()已复制int64_t OH_NativeImage_GetTimestamp (OH_NativeImage * image) 描述： 获取最近调用OH_NativeImage_UpdateSurfaceImage的纹理图像的相关时间戳。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。     返回： 返回纹理图像的相关时间戳。 起始版本： 9  OH_NativeImage_GetTransformMatrix()已复制int32_t OH_NativeImage_GetTransformMatrix (OH_NativeImage * image, float matrix[16] ) 描述： 获取最近调用OH_NativeImage_UpdateSurfaceImage的纹理图像的变化矩阵。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。   matrix  用来存储要获取的4*4的变化矩阵。     返回： 返回一个由SurfaceError定义的int32_t类型的错误码。 起始版本： 9  OH_NativeImage_UpdateSurfaceImage()已复制int32_t OH_NativeImage_UpdateSurfaceImage (OH_NativeImage * image) 描述： 通过OH_NativeImage获取最新帧更新相关联的OpenGL ES纹理。 @syscap SystemCapability.Graphic.Graphic2D.NativeImage 参数：  Name  描述  image  指向OH_NativeImage实例的指针。     返回： 返回一个由SurfaceError定义的int32_t类型的错误码。 起始版本： 9   上一篇 Drawing 下一篇 NativeVsync 以上内容对您是否有帮助？毫无帮助帮助不大一般很好非常好意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。