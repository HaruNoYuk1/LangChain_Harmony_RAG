您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。导入模块account_distributedAccount.getDistributedAccountAbilityDistributedAccountAbilitygetOsAccountDistributedInfo9+getOsAccountDistributedInfo9+queryOsAccountDistributedInfo(deprecated)queryOsAccountDistributedInfo(deprecated)setOsAccountDistributedInfo9+setOsAccountDistributedInfo9+updateOsAccountDistributedInfo(deprecated)updateOsAccountDistributedInfo(deprecated)DistributedInfo@ohos.account.distributedAccount (分布式帐号管理) 更新时间: 2024-03-18 17:33 毫无帮助帮助不大一般很好非常好
分享
 本模块提供管理分布式帐号的一些基础功能，主要包括查询和更新帐号登录状态。 
说明
本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。 
 导入模块已复制import account_distributedAccount from '@ohos.account.distributedAccount';  account_distributedAccount.getDistributedAccountAbilitygetDistributedAccountAbility(): DistributedAccountAbility 获取分布式帐号单实例对象。 系统能力： SystemCapability.Account.OsAccount 返回值：  类型  说明  DistributedAccountAbility  返回一个实例，实例提供查询和更新分布式帐号登录状态方法。     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();  DistributedAccountAbility提供查询和更新分布式帐号登录状态方法(需要先获取分布式帐号的单实例对象)。  getOsAccountDistributedInfo9+getOsAccountDistributedInfo(callback: AsyncCallback<DistributedInfo>): void 获取分布式帐号信息，使用callback异步回调。 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_DISTRIBUTED_ACCOUNTS 或 ohos.permission.GET_DISTRIBUTED_ACCOUNTS 或 ohos.permission.DISTRIBUTED_DATASYNC 参数： 参数名  类型  必填  说明    callback  AsyncCallback<DistributedInfo>  是  回调参数。当获取分布式帐号信息成功，err为undefined，data为获取到的分布式帐号信息对象；否则为错误对象。     错误码：  错误码ID  错误信息  12300001  System service exception.     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();try {  accountAbility.getOsAccountDistributedInfo((err, data) => {    console.log("getOsAccountDistributedInfo err: " + JSON.stringify(err));    console.log('Query account info name: ' + data.name);    console.log('Query account info id: ' + data.id);  });} catch (e) {  console.log("getOsAccountDistributedInfo exception: " + JSON.stringify(e));}  getOsAccountDistributedInfo9+getOsAccountDistributedInfo(): Promise<DistributedInfo> 获取分布式帐号信息。使用Promise异步回调。 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_DISTRIBUTED_ACCOUNTS 或 ohos.permission.GET_DISTRIBUTED_ACCOUNTS 或 ohos.permission.DISTRIBUTED_DATASYNC 返回值：  类型  说明  Promise<DistributedInfo>  Promise对象，返回分布式帐号信息对象。     错误码：  错误码ID  错误信息  12300001  System service exception.     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();try {  accountAbility.getOsAccountDistributedInfo().then((data) => {      console.log('Query account info name: ' + data.name);      console.log('Query account info id: ' + data.id);  }).catch((err) => {      console.log("getOsAccountDistributedInfo err: "  + JSON.stringify(err));  });} catch (e) {  console.log("getOsAccountDistributedInfo exception: " + JSON.stringify(e));}  queryOsAccountDistributedInfo(deprecated)queryOsAccountDistributedInfo(callback: AsyncCallback<DistributedInfo>): void 获取分布式帐号信息。使用callback异步回调。 
说明
从 API version 7开始支持，从API version 9开始废弃。建议使用getOsAccountDistributedInfo。 
 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_LOCAL_ACCOUNTS 或 ohos.permission.DISTRIBUTED_DATASYNC 参数： 参数名  类型  必填  说明    callback  AsyncCallback<DistributedInfo>  是  回调函数。当获取分布式帐号信息成功，err为undefined，data为获取到的分布式帐号信息对象；否则为错误对象。     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();accountAbility.queryOsAccountDistributedInfo((err, data) => {    console.log("queryOsAccountDistributedInfo err: " + JSON.stringify(err));    console.log('Query account info name: ' + data.name);    console.log('Query account info id: ' + data.id);});  queryOsAccountDistributedInfo(deprecated)queryOsAccountDistributedInfo(): Promise<DistributedInfo> 获取分布式帐号信息。使用Promise异步回调。 
说明
从 API version 7开始支持，从API version 9开始废弃。建议使用getOsAccountDistributedInfo。 
 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_LOCAL_ACCOUNTS 或 ohos.permission.DISTRIBUTED_DATASYNC 返回值：  类型  说明  Promise<DistributedInfo>  Promise对象，返回分布式帐号信息对象。     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();accountAbility.queryOsAccountDistributedInfo().then((data) => {    console.log('Query account info name: ' + data.name);    console.log('Query account info id: ' + data.id);}).catch((err) => {    console.log("queryOsAccountDistributedInfoerr: "  + JSON.stringify(err));});  setOsAccountDistributedInfo9+setOsAccountDistributedInfo(accountInfo: DistributedInfo, callback: AsyncCallback<void>): void 更新分布式帐号信息。使用callback异步回调。 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_DISTRIBUTED_ACCOUNTS 参数： 参数名  类型  必填  说明    accountInfo  DistributedInfo  是  分布式帐号信息。   callback  AsyncCallback<void>  是  回调函数。当更新分布式帐号信息成功时，err为undefined，否则为错误对象。     错误码：  错误码ID  错误信息  12300001  System service exception.   12300002  Invalid accountInfo.   12300003  Account not found.     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();let accountInfo = {id: '12345', name: 'ZhangSan', event: 'Ohos.account.event.LOGIN'};try {  accountAbility.setOsAccountDistributedInfo(accountInfo, (err) => {      console.log("setOsAccountDistributedInfo err: " + JSON.stringify(err));  });} catch (e) {  console.log("setOsAccountDistributedInfo exception: " + JSON.stringify(e));}  setOsAccountDistributedInfo9+setOsAccountDistributedInfo(accountInfo: DistributedInfo): Promise<void> 更新分布式帐号信息。使用Promise异步回调。 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_DISTRIBUTED_ACCOUNTS 参数： 参数名  类型  必填  说明    accountInfo  DistributedInfo  是  分布式帐户信息。     返回值：  类型  说明  Promise<void>  Promise对象，无返回结果的Promise对象。     错误码：  错误码ID  错误信息  12300001  System service exception.   12300002  invalid accountInfo.     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();let accountInfo = {id: '12345', name: 'ZhangSan', event: 'Ohos.account.event.LOGIN'};try {  accountAbility.setOsAccountDistributedInfo(accountInfo).then(() => {      console.log('setOsAccountDistributedInfo Success');  }).catch((err) => {      console.log("setOsAccountDistributedInfo err: "  + JSON.stringify(err));  });} catch (e) {  console.log("setOsAccountDistributedInfo exception: " + JSON.stringify(e));}  updateOsAccountDistributedInfo(deprecated)updateOsAccountDistributedInfo(accountInfo: DistributedInfo, callback: AsyncCallback<void>): void 更新分布式帐号信息。使用callback异步回调。 
说明
从 API version 7开始支持，从API version 9开始废弃。建议使用setOsAccountDistributedInfo。 
 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_LOCAL_ACCOUNTS 参数： 参数名  类型  必填  说明    accountInfo  DistributedInfo  是  分布式帐号信息。   callback  AsyncCallback<void>  是  回调函数。当更新分布式帐号信息成功时，err为undefined，否则为错误对象。     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();let accountInfo = {id: '12345', name: 'ZhangSan', event: 'Ohos.account.event.LOGIN'};accountAbility.updateOsAccountDistributedInfo(accountInfo, (err) => {    console.log("queryOsAccountDistributedInfo err: " + JSON.stringify(err));});  updateOsAccountDistributedInfo(deprecated)updateOsAccountDistributedInfo(accountInfo: DistributedInfo): Promise<void> 更新分布式帐号信息。使用Promise异步回调。 
说明
从 API version 7开始支持，从API version 9开始废弃。建议使用setOsAccountDistributedInfo。 
 系统能力： SystemCapability.Account.OsAccount 需要权限： ohos.permission.MANAGE_LOCAL_ACCOUNTS 参数： 参数名  类型  必填  说明    accountInfo  DistributedInfo  是  分布式帐户信息。     返回值：  类型  说明  Promise<void>  Promise对象，无返回结果的Promise对象。     示例： 已复制const accountAbility = account_distributedAccount.getDistributedAccountAbility();let accountInfo = {id: '12345', name: 'ZhangSan', event: 'Ohos.account.event.LOGIN'};accountAbility.updateOsAccountDistributedInfo(accountInfo).then(() => {    console.log('updateOsAccountDistributedInfo Success'); }).catch((err) => {    console.log("updateOsAccountDistributedInfo err: "  + JSON.stringify(err));});  DistributedInfo提供操作系统帐户的分布式信息。 系统能力： SystemCapability.Account.OsAccount 名称  类型  必填  说明    name  string  是  分布式帐号名称，非空字符串。   id  string  是  分布式帐号UID，非空字符串。   event  string  是  分布式帐号登录状态，包括登录、登出、Token失效和注销，分别对应以下字符串： - Ohos.account.event.LOGIN - Ohos.account.event.LOGOUT - Ohos.account.event.TOKEN_INVALID - Ohos.account.event.LOGOFF   nickname9+  string  否  分布式帐号的昵称，非空字符串。   avatar9+  string  否  分布式帐号的头像，非空字符串。   scalableData  object  否  分布式帐号扩展信息，根据业务所需，以k-v形式传递定制化信息。 说明：该参数是预留的可选项，目前查询和更新的方法实现中未使用。       上一篇 @ohos.account.appAccount (应用帐号管理) 下一篇 @ohos.account.osAccount (系统帐号管理) 以上内容对您是否有帮助？毫无帮助帮助不大一般很好非常好意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。