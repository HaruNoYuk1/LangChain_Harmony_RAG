您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。汇总文件结构体枚举函数枚举类型说明anonymous enumanonymous enum函数说明OH_AccessPixels()OH_GetImageInfo()OH_UnAccessPixels()Image 更新时间: 2024-02-07 14:08 毫无帮助帮助不大一般很好非常好
分享
 提供获取pixelmap的数据和信息的接口方法。 使用该文件下接口，需要依赖：libpixelmap_ndk.z.so @Syscap SystemCapability.Multimedia.Image 起始版本： 8 汇总 文件  文件名称  描述  image_pixel_map_napi.h  声明可以锁定并访问pixelmap数据的方法，声明解锁的方法。 引用文件：<multimedia/image_framework/image_pixel_map_napi.h>      结构体  结构体名称  描述  OhosPixelMapInfo  用于定义 pixel map 的相关信息。      枚举  名称  描述  { OHOS_IMAGE_RESULT_SUCCESS = 0, OHOS_IMAGE_RESULT_BAD_PARAMETER = -1 }  函数方法返回值的错误码的枚举。   { OHOS_PIXEL_MAP_FORMAT_NONE = 0, OHOS_PIXEL_MAP_FORMAT_RGBA_8888 = 3, OHOS_PIXEL_MAP_FORMAT_RGB_565 = 2 }  pixel 格式的枚举。      函数  名称  描述  OH_GetImageInfo (napi_env env, napi_value value, OhosPixelMapInfo *info)  获取 PixelMap 的信息，并记录信息到OhosPixelMapInfo结构中。   OH_AccessPixels (napi_env env, napi_value value, void **addrPtr)  获取PixelMap对象数据的内存地址，并锁定该内存。   OH_UnAccessPixels (napi_env env, napi_value value)  释放PixelMap对象数据的内存锁, 用于匹配方法OH_AccessPixels。      枚举类型说明 anonymous enum已复制anonymous enum 描述: 函数方法返回值的错误码的枚举。  枚举值  描述  OHOS_IMAGE_RESULT_SUCCESS  成功的结果   OHOS_IMAGE_RESULT_BAD_PARAMETER  无效值     起始版本： 8  anonymous enum已复制anonymous enum 描述: pixel 格式的枚举。  枚举值  描述  OHOS_PIXEL_MAP_FORMAT_NONE  未知的格式   OHOS_PIXEL_MAP_FORMAT_RGBA_8888  32-bit RGBA。 由 R, G, B组成，包括 A 都需要占用 8 bits。存储顺序是从高位到低位。   OHOS_PIXEL_MAP_FORMAT_RGB_565  16-bit RGB。 仅由 R, G, B 组成. 存储顺序是从高位到低位: 红色占用5 bits,绿色占用6 bits,蓝色占用5 bits。     起始版本： 8  函数说明 OH_AccessPixels()已复制int32_t OH_AccessPixels (napi_env env, napi_value value, void ** addrPtr ) 描述: 获取PixelMap对象数据的内存地址，并锁定该内存。 函数执行成功后，*addrPtr就是获取的待访问的内存地址. 访问操作完成后,必须要使用OH_UnAccessPixels来释放锁, 否则的话资源无法被释放. 待解锁后，内存地址就不可以再被访问和操作。 参数:  名称  描述  env  napi的环境指针。   value  应用层的 PixelMap 对象。   addrPtr  用于指向的内存地址的双指针对象。     参见: UnAccessPixels 返回: 操作成功则返回 OHOS_IMAGE_RESULT_SUCCESS; 如果操作失败，则返回错误码。 起始版本： 8  OH_GetImageInfo()已复制struct OhosPixelMapCreateOps OH_GetImageInfo (napi_env env, napi_value value, OhosPixelMapInfo * info ) 描述: 获取 PixelMap 的信息，并记录信息到OhosPixelMapInfo结构中。 参数:  名称  描述  env  napi的环境指针。   value  应用层的 PixelMap 对象。   info  用于保存信息的指针对象. 更多细节, 参看 OhosPixelMapInfo。     返回: 如果获取并保存信息成功，则返回0; 如果操作失败，则返回错误码。 参见: OhosPixelMapInfo 起始版本： 8  OH_UnAccessPixels()已复制int32_t OH_UnAccessPixels (napi_env env, napi_value value ) 描述: 释放PixelMap对象数据的内存锁, 用于匹配方法OH_AccessPixels. 参数:  名称  描述  env  napi的环境指针。   value  应用层的 PixelMap 对象。     返回: 操作成功则返回 OHOS_IMAGE_RESULT_SUCCESS; 如果操作失败，则返回错误码。 参见: AccessPixels 起始版本： 8   上一篇 NativeVsync 下一篇 Rawfile 以上内容对您是否有帮助？毫无帮助帮助不大一般很好非常好意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。