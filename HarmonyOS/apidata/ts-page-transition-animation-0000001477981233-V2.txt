您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。pageTransitionPageTransitionEnterPageTransitionExitPageTransitionOptions对象说明属性事件RouteType枚举说明SlideEffect枚举说明示例页面间转场 更新时间: 2024-04-08 17:33 DOC.startaDOC.startbDOC.startcDOC.startdDOC.starte
分享
 在全局pageTransition方法内配置页面入场和页面退场时的自定义转场动效。 
说明
从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。 
 pageTransitionpageTransition?(): void 进入此页面或移动到其他页面时实现动画。  PageTransitionEnterPageTransitionEnter(value: PageTransitionOptions) 设置当前页面的自定义入场动效。 参数： 参数名  类型  必填  说明    value  PageTransitionOptions  是  配置入场动效的参数。      PageTransitionExitPageTransitionExit(value: PageTransitionOptions) 设置当前页面的自定义退出动效。 参数： 参数名  类型  必填  说明    value  PageTransitionOptions  是  配置入场动效的参数。      PageTransitionOptions对象说明 名称  类型  必填  描述    type  RouteType  否  页面转场效果生效的路由类型。 默认值：RouteType.None。   duration  number  否  动画的时长。 单位：毫秒 默认值：1000   curve  Curve | string  否  动画曲线。string类型的取值支持"ease"、"ease-in"、"ease-out"、"ease-in-out"、"extreme-deceleration"、"fast-out-linear-in"、"fast-out-slow-in"、"friction"、"linear"、"linear-out-slow-in"、"rhythm"、"sharp"、"smooth"。 默认值：Curve.Linear   delay  number  否  动画延迟时长。 单位：毫秒 默认值：0 说明： 没有匹配时使用系统默认的页面转场效果(根据设备可能会有差异)，如需禁用系统默认页面转场效果，可以指定duration为0。      属性 参数名称  参数类型  必填  参数描述    slide  SlideEffect  否  设置页面转场时的滑入滑出效果。 默认值：SlideEffect.Right   translate  { x? : number | string, y? : number | string, z? : number | string }  否  设置页面转场时的平移效果，为入场时起点和退场时终点的值，和slide同时设置时默认生效slide。 - x：横向的平移距离。 - y：纵向的平移距离。 - z：竖向的平移距离。   scale  { x? : number, y? : number, z? : number, centerX? : number | string, centerY? : number | string }  否  设置页面转场时的缩放效果，为入场时起点和退场时终点的值。 - x：横向放大倍数（或缩小比例）。 - y：纵向放大倍数（或缩小比例）。 - z：竖向放大倍数（或缩小比例）。 - centerX、centerY缩放中心点。 - 中心点为0时，默认的是组件的左上角。   opacity  number  否  设置入场的起点透明度值或者退场的终点透明度值。 默认值：1      事件  事件  功能描述  onEnter(event: (type?: RouteType, progress?: number) => void)  回调入参为当前入场动画的归一化进度[0 - 1]。 - type：跳转方法。 - progress：当前进度。 触发该事件的条件： 逐帧回调，直到入场动画结束，progress从0变化到1。   onExit(event: (type?: RouteType, progress?: number) => void)  回调入参为当前退场动画的归一化进度[0 - 1]。 - type：跳转方法。 - progress：当前进度。 触发该事件的条件： 逐帧回调，直到退场动画结束，progress从0变化到1。      RouteType枚举说明  名称  描述  Pop  重定向指定页面。从PageB回退到之前的页面PageA。对于PageB，指定RouteType为None或者Pop的PageTransitionExit组件样式生效，对于PageA，指定RouteType为None或者Pop的PageTransitionEnter组件样式生效。   Push  跳转到下一页面。PageA跳转到下一个新的界面PageB。对于PageA，指定RouteType为None或者Push的PageTransitionExit组件样式生效，对于PageB，指定RouteType为None或者Push的PageTransitionEnter组件样式生效。   None  页面未重定向。如Push和Pop描述中RouteType为None的情形，即页面进场时PageTransitionEnter的转场效果生效；退场时PageTransitionExit的转场效果生效。      SlideEffect枚举说明  名称  描述  Left  设置到入场时表示从左边滑入，出场时表示滑出到左边。   Right  设置到入场时表示从右边滑入，出场时表示滑出到右边。   Top  设置到入场时表示从上边滑入，出场时表示滑出到上边。   Bottom  设置到入场时表示从下边滑入，出场时表示滑出到下边。      示例自定义方式1：配置了当前页面的入场动画为淡入，退场动画为缩小。 DOC.hasCopy// index.ets@Entry@Componentstruct PageTransitionExample1 {  @State scale1: number = 1  @State opacity1: number = 1
  build() {    Column() {      Navigator({ target: 'pages/page1', type: NavigationType.Push }) {        Image($r('app.media.bg1')).width('100%').height('100%')    // 图片存放在media文件夹下      }    }.scale({ x: this.scale1 }).opacity(this.opacity1)  }  // 自定义方式1：完全自定义转场过程的效果  pageTransition() {    PageTransitionEnter({ duration: 1200, curve: Curve.Linear })      .onEnter((type: RouteType, progress: number) => {        this.scale1 = 1        this.opacity1 = progress      }) // 进场过程中会逐帧触发onEnter回调，入参为动效的归一化进度(0% -- 100%)    PageTransitionExit({ duration: 1500, curve: Curve.Ease })      .onExit((type: RouteType, progress: number) => {        this.scale1 = 1 - progress        this.opacity1 = 1      }) // 退场过程中会逐帧触发onExit回调，入参为动效的归一化进度(0% -- 100%)  }} DOC.hasCopy// page1.ets@Entry@Componentstruct AExample {  @State scale2: number = 1  @State opacity2: number = 1
  build() {    Column() {      Navigator({ target: 'pages/index', type: NavigationType.Push }) {        Image($r('app.media.bg2')).width('100%').height('100%')   // 图片存放在media文件夹下      }    }.width('100%').height('100%').scale({ x: this.scale2 }).opacity(this.opacity2)  }  // 自定义方式1：完全自定义转场过程的效果  pageTransition() {    PageTransitionEnter({ duration: 1200, curve: Curve.Linear })      .onEnter((type: RouteType, progress: number) => {        this.scale2 = 1        this.opacity2 = progress      }) // 进场过程中会逐帧触发onEnter回调，入参为动效的归一化进度(0% -- 100%)    PageTransitionExit({ duration: 1500, curve: Curve.Ease })      .onExit((type: RouteType, progress: number) => {        this.scale2 = 1 - progress        this.opacity2 = 1      }) // 退场过程中会逐帧触发onExit回调，入参为动效的归一化进度(0% -- 100%)  }}  自定义方式2：配置了当前页面的入场动画为从左侧滑入，退场为缩小加透明度变化。 DOC.hasCopy// index.ets @Entry@Componentstruct PageTransitionExample {  @State scale1: number = 1  @State opacity1: number = 1
  build() {    Column() {      Navigator({ target: 'pages/page1', type: NavigationType.Push }) {        Image($r('app.media.bg1')).width('100%').height('100%')   // 图片存放在media文件夹下      }    }.scale({ x: this.scale1 }).opacity(this.opacity1)  }
  // 自定义方式2：使用系统提供的多种默认效果(平移、缩放、透明度等)  pageTransition() {    PageTransitionEnter({ duration: 1200 })      .slide(SlideEffect.Left)    PageTransitionExit({ delay: 100 })      .translate({ x: 100.0, y: 100.0 })      .opacity(0)  }} DOC.hasCopy// page1.ets@Entry@Componentstruct PageTransitionExample1 {  @State scale2: number = 1  @State opacity2: number = 1
  build() {    Column() {      Navigator({ target: 'pages/index', type: NavigationType.Push }) {        Image($r('app.media.bg2')).width('100%').height('100%')    // 图片存放在media文件夹下      }    }.scale({ x: this.scale2 }).opacity(this.opacity2)  }
  // 自定义方式2：使用系统提供的多种默认效果(平移、缩放、透明度等)  pageTransition() {    PageTransitionEnter({ duration: 1200 })      .slide(SlideEffect.Left)    PageTransitionExit({ delay: 100 })      .translate({ x: 100.0, y: 100.0 })      .opacity(0)  }}    上一篇 转场动画 下一篇 组件内转场 以上内容对您是否有帮助？DOC.startaDOC.startbDOC.startcDOC.startdDOC.starte意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。