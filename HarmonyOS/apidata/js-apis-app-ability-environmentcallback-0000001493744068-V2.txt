您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。导入模块EnvironmentCallback.onConfigurationUpdatedEnvironmentCallback.onMemoryLevel@ohos.app.ability.EnvironmentCallback (EnvironmentCallback) 更新时间: 2024-03-20 16:29 毫无帮助帮助不大一般很好非常好
分享
 EnvironmentCallback模块提供应用上下文ApplicationContext对系统环境变化监听回调的能力，包括onConfigurationUpdated方法。 
说明
 本模块首批接口从API version 9 开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。 本模块接口仅可在Stage模型下使用。 
 导入模块已复制import EnvironmentCallback from '@ohos.app.ability.EnvironmentCallback';  EnvironmentCallback.onConfigurationUpdatedonConfigurationUpdated(config: Configuration): void; 注册系统环境变化的监听后，在系统环境变化时触发回调。 系统能力：SystemCapability.Ability.AbilityRuntime.AbilityCore 参数： 参数名 类型 必填 说明   config Configuration 是 变化后的Configuration对象。     EnvironmentCallback.onMemoryLevelonMemoryLevel(level: AbilityConstant.MemoryLevel): void; 注册系统环境变化的监听后，在系统内存变化时触发回调。 系统能力：SystemCapability.Ability.AbilityRuntime.AbilityCore 参数： 参数名 类型 必填 说明   level AbilityConstant.MemoryLevel 是 回调返回内存微调级别，显示当前内存使用状态。    示例： 已复制import UIAbility from '@ohos.app.ability.UIAbility';
let callbackId;
export default class MyAbility extends UIAbility {  onCreate() {      console.log('MyAbility onCreate');      globalThis.applicationContext = this.context.getApplicationContext();      let EnvironmentCallback  =  {          onConfigurationUpdated(config){              console.log('onConfigurationUpdated config:' + JSON.stringify(config));          },          onMemoryLevel(level){              console.log('onMemoryLevel level: ${JSON.stringify(level)}');          }      };      // 1.获取applicationContext      let applicationContext = globalThis.applicationContext;      // 2.通过applicationContext注册监听应用内生命周期      callbackId = applicationContext.registerEnvironmentCallback(EnvironmentCallback);      console.log('registerEnvironmentCallback number: ' + JSON.stringify(callbackId));  }  onDestroy() {      let applicationContext = globalThis.applicationContext;      applicationContext.unregisterEnvironmentCallback(callbackId, (error, data) => {          console.log('unregisterEnvironmentCallback success, err: ' + JSON.stringify(error));      });  }}   上一篇 @ohos.app.ability.contextConstant (ContextConstant) 下一篇 @ohos.app.ability.ExtensionAbility (扩展能力基类) 以上内容对您是否有帮助？毫无帮助帮助不大一般很好非常好意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。