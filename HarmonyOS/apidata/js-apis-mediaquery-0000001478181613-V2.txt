您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。导入模块mediaquery.matchMediaSyncMediaQueryListener属性onoffMediaQueryResult属性示例@ohos.mediaquery (媒体查询) 更新时间: 2024-03-18 17:33 毫无帮助帮助不大一般很好非常好
分享
  提供根据不同媒体类型定义不同的样式。 
说明
 从API Version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。 该模块不支持在UIAbility的文件声明处使用，即不能在UIAbility的生命周期中调用，需要在创建组件实例后使用。 
  导入模块 已复制import mediaquery from '@ohos.mediaquery'   mediaquery.matchMediaSync matchMediaSync(condition: string): MediaQueryListener 设置媒体查询的查询条件，并返回对应的监听句柄。 系统能力： SystemCapability.ArkUI.ArkUI.Full  参数：     参数名 类型 必填 说明    condition string 是 媒体事件的匹配条件，具体可参考语法规则。     返回值：    类型 说明  MediaQueryListener 媒体事件监听句柄，用于注册和去注册监听回调。    示例： 已复制let listener = mediaquery.matchMediaSync('(orientation: landscape)'); //监听横屏事件   MediaQueryListener 媒体查询的句柄，并包含了申请句柄时的首次查询结果。 系统能力： SystemCapability.ArkUI.ArkUI.Full   属性     名称 类型 可读 可写 说明    matches boolean 是 否 是否符合匹配条件。   media string 是 否 媒体事件的匹配条件。      on on(type: 'change', callback: Callback<MediaQueryResult>): void 通过句柄向对应的查询条件注册回调，当媒体属性发生变更时会触发该回调。 系统能力： SystemCapability.ArkUI.ArkUI.Full 参数：     参数名 类型 必填 说明    type string 是 必须填写字符串'change'。   callback Callback<MediaQueryResult> 是 向媒体查询注册的回调    示例： 详见off示例。   off off(type: 'change', callback?: Callback<MediaQueryResult>): void 通过句柄向对应的查询条件取消注册回调，当媒体属性发生变更时不在触发指定的回调。 系统能力： SystemCapability.ArkUI.ArkUI.Full 参数：     参数名 类型 必填 说明    type string 是 必须填写字符串'change'。   callback Callback<MediaQueryResult> 否 需要去注册的回调，如果参数缺省则去注册该句柄下所有的回调。    示例： 已复制  import mediaquery from '@ohos.mediaquery'    let listener = mediaquery.matchMediaSync('(orientation: landscape)'); //监听横屏事件  function onPortrait(mediaQueryResult) {      if (mediaQueryResult.matches) {          // do something here      } else {          // do something here      }  }  listener.on('change', onPortrait) // 注册回调  listener.off('change', onPortrait) // 取消注册回调   MediaQueryResult 用于执行媒体查询操作。 系统能力： SystemCapability.ArkUI.ArkUI.Full   属性     名称 类型 可读 可写 说明    matches boolean 是 否 是否符合匹配条件。   media string 是 否 媒体事件的匹配条件。      示例 已复制import mediaquery from '@ohos.mediaquery'
@Entry@Componentstruct MediaQueryExample {  @State color: string = '#DB7093'  @State text: string = 'Portrait'  listener = mediaquery.matchMediaSync('(orientation: landscape)')
  onPortrait(mediaQueryResult) {    if (mediaQueryResult.matches) {      this.color = '#FFD700'      this.text = 'Landscape'    } else {      this.color = '#DB7093'      this.text = 'Portrait'    }  }
  aboutToAppear() {    let portraitFunc = this.onPortrait.bind(this) // bind current js instance    this.listener.on('change', portraitFunc)  }
  build() {    Flex({ direction: FlexDirection.Column, alignItems: ItemAlign.Center, justifyContent: FlexAlign.Center }) {      Text(this.text).fontSize(24).fontColor(this.color)    }    .width('100%').height('100%')  }}   上一篇 @ohos.matrix4 (矩阵变换) 下一篇 @ohos.promptAction (弹窗) 以上内容对您是否有帮助？毫无帮助帮助不大一般很好非常好意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。