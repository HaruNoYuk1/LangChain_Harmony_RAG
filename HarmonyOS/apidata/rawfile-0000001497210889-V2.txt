您正在浏览HarmonyOS开发者3.1/4.0版本配套的开发者文档，对应API能力级别为API 9 Release，详细版本配套关系请参考版本说明。汇总文件结构体类型定义函数详细描述类型定义说明NativeResourceManagerRawDirRawFile函数说明OH_ResourceManager_CloseRawDir()OH_ResourceManager_CloseRawFile()OH_ResourceManager_GetRawFileCount()OH_ResourceManager_GetRawFileDescriptor()OH_ResourceManager_GetRawFileName()OH_ResourceManager_GetRawFileOffset()OH_ResourceManager_GetRawFileSize()OH_ResourceManager_InitNativeResourceManager()OH_ResourceManager_OpenRawDir()OH_ResourceManager_OpenRawFile()OH_ResourceManager_ReadRawFile()OH_ResourceManager_ReleaseNativeResourceManager()OH_ResourceManager_ReleaseRawFileDescriptor()OH_ResourceManager_SeekRawFile()Rawfile 更新时间: 2024-02-07 14:08 毫无帮助帮助不大一般很好非常好
分享
 提供操作rawfile目录和rawfile文件的功能。 功能包括遍历、打开、搜索、读取和关闭rawfile。 起始版本： 8 汇总 文件  文件名称  描述  raw_dir.h  提供rawfile目录相关功能。 引用文件：<rawfile/raw_dir.h>   raw_file.h  提供rawfile文件相关功能。 引用文件：<rawfile/raw_file.h>   raw_file_manager.h  提供资源管理rawfile相关功能。 引用文件：<rawfile/raw_file_manager.h>      结构体  结构体名称  描述  RawFileDescriptor  提供rawfile文件描述符信息。      类型定义  类型定义名称  描述  RawDir  提供对rawfile目录的访问。   Rawfile  提供对rawfile的访问功能。   NativeResourceManager  代表resource manager。      函数  函数名称  描述  OH_ResourceManager_GetRawFileName (RawDir *rawDir, int index)  通过索引获取rawfile文件名称。   OH_ResourceManager_GetRawFileCount (RawDir *rawDir)  获取RawDir中的rawfile数量。   OH_ResourceManager_CloseRawDir (RawDir *rawDir)  关闭已打开的RawDir并释放所有相关联资源。   OH_ResourceManager_ReadRawFile (const Rawfile *rawFile, void *buf, size_t length)  读取rawfile。   OH_ResourceManager_SeekRawFile (const Rawfile  *rawFile, long offset, int whence)  基于指定的offset，在rawfile文件内搜索读写数据的位置。   OH_ResourceManager_GetRawFileSize (Rawfile *rawFile)  获取rawfile长度，单位为int32_t。   OH_ResourceManager_CloseRawFile (Rawfile  *rawFile)  关闭已打开的Rawfile  以及释放所有相关联资源。   OH_ResourceManager_GetRawFileOffset (const Rawfile  *rawFile)  获取rawfile当前的offset，单位为int32_t。   OH_ResourceManager_GetRawFileDescriptor (const Rawfile  *rawFile, RawFileDescriptor &descriptor)  基于offset(单位为int32_t)和文件长度打开rawfile，并获取rawfile文件描述符。   OH_ResourceManager_ReleaseRawFileDescriptor (const RawFileDescriptor &descriptor)  关闭rawfile文件描述符。   OH_ResourceManager_InitNativeResourceManager (napi_env env, napi_value jsResMgr)  基于JavaScript resource manager获取native resource manager。   OH_ResourceManager_ReleaseNativeResourceManager (NativeResourceManager *resMgr)  释放native resource manager。   OH_ResourceManager_OpenRawDir (const NativeResourceManager *mgr, const char *dirName)  打开rawfile目录。   OH_ResourceManager_OpenRawFile (const NativeResourceManager *mgr, const char *fileName)  打开rawfile文件。      详细描述 类型定义说明 NativeResourceManager已复制typedef struct NativeResourceManager NativeResourceManager 描述： 代表resource manager。 此类封装了JavaScript resource manager的native实现 ResourceManager指针可以通过调用OH_ResourceManager_InitNativeResourceManager方法获取 起始版本： 8  RawDir已复制typedef struct RawDir RawDir 描述： 提供对rawfile目录的访问。 起始版本： 8  RawFile已复制typedef struct RawFile RawFile 描述： 提供对rawfile的访问功能。 起始版本： 8  函数说明 OH_ResourceManager_CloseRawDir()已复制void OH_ResourceManager_CloseRawDir (RawDir * rawDir) 描述： 关闭已打开的RawDir并释放所有相关联资源。 参数：  Name  描述  rawDir  表示指向RawDir的指针。     参见： OH_ResourceManager_OpenRawDir 起始版本： 8  OH_ResourceManager_CloseRawFile()已复制void OH_ResourceManager_CloseRawFile (RawFile * rawFile) 描述： 关闭已打开的Rawfile  以及释放所有相关联资源。 参数：  Name  描述  rawFile  表示指向Rawfile 的指针。     参见： OH_ResourceManager_OpenRawFile 起始版本： 8  OH_ResourceManager_GetRawFileCount()已复制int OH_ResourceManager_GetRawFileCount (RawDir * rawDir) 描述： 获取RawDir中的rawfile数量。 通过此方法可以获取OH_ResourceManager_GetRawFileName中可用的索引。 参数：  Name  描述  rawDir  表示指向RawDir的指针。     参见： OH_ResourceManager_GetRawFileName 起始版本： 8  OH_ResourceManager_GetRawFileDescriptor()已复制bool OH_ResourceManager_GetRawFileDescriptor (const RawFile * rawFile, RawFileDescriptor & descriptor ) 描述： 基于offset(单位为int32_t)和文件长度打开rawfile，并获取rawfile文件描述符。 打开的文件描述符被用于读取rawfile。 参数：  Name  描述  rawFile  表示指向Rawfile 的指针。   descriptor  显示rawfile文件描述符，以及在HAP中的起始位置和长度。     返回： 返回true表示打开rawfile文件描述符成功，返回false表示rawfile不允许被访问。 起始版本： 8  OH_ResourceManager_GetRawFileName()已复制const char* OH_ResourceManager_GetRawFileName (RawDir * rawDir, int index ) 描述： 通过索引获取rawfile文件名称。 可以使用此方法遍历rawfile目录。 参数：  Name  描述  rawDir  表示指向RawDir的指针。   index  表示文件在RawDir中的索引位置。     返回： 通过索引返回文件名称，此返回值可以作为OH_ResourceManager_OpenRawFile的输入参数， 如果遍历完所有文件仍未找到，则返回NULL。 参见： OH_ResourceManager_OpenRawFile 起始版本： 8  OH_ResourceManager_GetRawFileOffset()已复制long OH_ResourceManager_GetRawFileOffset (const RawFile * rawFile) 描述： 获取rawfile当前的offset，单位为int32_t。 rawfile当前的offset。 参数：  Name  描述  rawFile  表示指向Rawfile 的指针。     返回： 返回rawfile当前的offset。 起始版本： 8  OH_ResourceManager_GetRawFileSize()已复制long OH_ResourceManager_GetRawFileSize (RawFile * rawFile) 描述： 获取rawfile长度，单位为int32_t。 参数：  Name  描述  rawFile  表示指向Rawfile 的指针。     返回： Returns rawfile整体长度。 起始版本： 8  OH_ResourceManager_InitNativeResourceManager()已复制NativeResourceManager* OH_ResourceManager_InitNativeResourceManager (napi_env env, napi_value jsResMgr ) 描述： 基于JavaScript resource manager获取native resource manager。 通过获取resource manager来完成rawfile相关功能。 参数：  Name  描述  env  表示JavaScript Native Interface (napi)环境指针。   jsResMgr  表示JavaScript resource manager。     返回： 返回NativeResourceManager指针。 起始版本： 8  OH_ResourceManager_OpenRawDir()已复制RawDir* OH_ResourceManager_OpenRawDir (const NativeResourceManager * mgr, const char * dirName ) 描述： 打开rawfile目录。 打开rawfile目录后，可以遍历对应目录下的rawfile文件。 参数：  Name  描述  mgr  表示指向NativeResourceManager的指针，此指针是通过调用 OH_ResourceManager_InitNativeResourceManager方法获取的。   dirName  表示要打开的rawfile目录名称，当传递一个空字符串时表示打开rawfile根目录。     返回： 返回RawDir指针。使用完此指针后，调用OH_ResourceManager_CloseRawDir释放。 参见： OH_ResourceManager_InitNativeResourceManager OH_ResourceManager_CloseRawDir 起始版本： 8  OH_ResourceManager_OpenRawFile()已复制RawFile* OH_ResourceManager_OpenRawFile (const NativeResourceManager * mgr, const char * fileName ) 描述： 打开rawfile文件。 当打开rawfile以后，可以读取它的数据。 参数：  Name  描述  mgr  表示指向NativeResourceManager的指针，此指针是通过调用 OH_ResourceManager_InitNativeResourceManager方法获取的。   fileName  表示基于rawfile根目录的相对路径下的文件名称。     返回： 返回Rawfile 指针。当使用完此指针，调用OH_ResourceManager_CloseRawFile释放。 参见： OH_ResourceManager_InitNativeResourceManager OH_ResourceManager_CloseRawFile 起始版本： 8  OH_ResourceManager_ReadRawFile()已复制int OH_ResourceManager_ReadRawFile (const RawFile * rawFile, void * buf, size_t length ) 描述： 读取rawfile。 从当前位置读取指定长度的数据。 参数：  Name  描述  rawFile  表示指向Rawfile 的指针。   buf  用于接收读取数据的缓冲区指针。   length  需要获取rawfile文件的长度。     返回： 如果成功返回rawfile文件的长度，如果失败则返回0。 起始版本： 8  OH_ResourceManager_ReleaseNativeResourceManager()已复制void OH_ResourceManager_ReleaseNativeResourceManager (NativeResourceManager * resMgr) 描述： 释放native resource manager。 参数：  Name  描述  resMgr  表示NativeResourceManager指针。     起始版本： 8  OH_ResourceManager_ReleaseRawFileDescriptor()已复制bool OH_ResourceManager_ReleaseRawFileDescriptor (const RawFileDescriptor & descriptor) 描述： 关闭rawfile文件描述符。 已打开的文件描述符在使用完以后必须释放，防止文件描述符泄露。 参数：  Name  描述  descriptor  包含rawfile文件描述符，以及在HAP中的起始位置和长度。     返回： 返回true表示关闭文件描述符成功，返回false表示关闭文件描述符失败。 起始版本： 8  OH_ResourceManager_SeekRawFile()已复制int OH_ResourceManager_SeekRawFile (const RawFile * rawFile, long offset, int whence ) 描述： 基于指定的offset，在rawfile文件内搜索读写数据的位置。 参数：  Name  描述  rawFile  表示指向Rawfile 的指针。   offset  表示指定的offset。   whence  读写位置，有以下场景: 0: 读写位置为offset 1: 读写位置为当前位置加上offset 2: 读写位置为文件末尾(EOF)加上offset。     返回： 如果搜索成功返回0，rawFile指针更新到新的读写位置。如果发生错误返回 (int) -1。 起始版本： 8   上一篇 Image 下一篇 MindSpore 以上内容对您是否有帮助？毫无帮助帮助不大一般很好非常好意见反馈
更多帮助请到“社区论坛”，如需要其他帮助，请通过“智能客服”提问。